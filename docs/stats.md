# Stats

The Vulnerability DB API provides a list of endpoints that allow users to query different statistis regarding the vulnerabilities stored in the Vuln DB.

### Get Fixed Findings Stats
This endpoint provides statistics for the _findings_ that are currently _FIXED_. It returns the number of fixed _findings_ by criticality (_informational_, _low_, _medium_, _high_ and _critical_).

It also  has support for filtering by _date_ and _target_ _tags_.

It's **important** to clarify that when **querying for a time range**, it returns every _finding_ that has been fixed in that time and **is still fixed at the end of the time range specified**, so a _finding_ that is _FIXED_ and then reopened in that span of time will not be counted.

For example we might want to know the stats of fixed issues during Q4 of 2019:
```
curl -H "Content-Type: application/json" \
"https://vulnerabilitydb.example.com/stats/fixed?minDate=2019-10-01&maxDate=2019-12-31"
```

Or the total number of issues by severity that were fixed at the beginning of 2020:
```
curl -H "Content-Type: application/json" \
"https://vulnerabilitydb.example.com/stats/fixed?atDate=2020-01-01"
```

### Get Open Findings Stats
This endpoint provides statistics for the _findings_ that are currently _OPEN_. It returns the number of open _findings_ by criticality (_informational_, _low_, _medium_, _high_ and _critical_).

It also  has support for filtering by _date_ and _target_ _tags_.

It's **important** to clarify that when **querying for a time range**, it returns every _finding_ that has been found in that time **regardless if that _finding_ has also been fixed in that span of time**.

For example we might want to know the stats of open issues during Q4 of 2019:
```
curl -H "Content-Type: application/json" \
"https://vulnerabilitydb.example.com/stats/open?minDate=2019-10-01&maxDate=2019-12-31"
```

Or the total number of open issues by severity at the beginning of 2020:
```
curl -H "Content-Type: application/json" \
"https://vulnerabilitydb.example.com/stats/open?atDate=2020-01-01"
```

### Get Issues Stats
The _Get Issues Stats_ endpoint provides statistics for the status of the _issues_ currently present in the Vulnerability Database.

By using filters for _date_ and _score_ we can query the number of _OPEN_ and _FIXED_ findings for each _issue_.

For example we can query the stats for high and critical severity _issues_ that were reported in Q4 of 2019:
```
curl -H "Content-Type: application/json" \
"https://vulnerabilitydb.example.com/stats/issues?minScore=7&minDate=2019-10-01&maxDate=2019-12-31"
```

### Get MTTR stats
MTTR stands for _Mean_ _Time_ _To_ _Remediate_, and is the average time that elapses since the vulnerability is found until it is fixed.

The _MTTR_ stats endpoint allows to query statistics related to the _Mean Time to Remediate_ classified by issue severity (_informational_, _low_, _medium_, _high_ and _critical_). It also returns the total average.

We can query _MTTR_ stats by time range and/or get statistics only for vulnerabilities that are related to _targets_ associated with a specific tag.

For example we can query _MTTR_ statistics for vulnerabilities that have been fixed in Q4 of 2019:
```
curl -H "Content-Type: application/json" \
"https://vulnerabilitydb.example.com/stats/mttr?minDate=2019-10-01&maxDate=2019-12-31"
```

Or we could query the _MTTR_ for vulnerabilities found in _targets_ associated with the Security Team:
```
curl -H "Content-Type: application/json" \
"https://vulnerabilitydb.example.com/stats/mttr?tag=sdrn:adevinta:team:security"
```

### Get Size Stats
The size stats endpoint returns statistics related to the number of elements currently stored in the Vulnerability DB.
- sources
- targets
- issues
- findings
- finding_events

```
curl -H "Content-Type: application/json" \
"https://vulnerabilitydb.example.com/stats/size"
```
